<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Darwin & Gumball Page Transition</title>

<!-- Bungee Font -->
<link href="https://fonts.googleapis.com/css2?family=Bungee&display=swap" rel="stylesheet">

<style>
  :root { 
    --dur: 900ms;
    --gif-dur: 8000ms;
  }

  * { box-sizing: border-box; }

  body {
    margin: 0;
    min-height: 100vh;
    background: #33c9ff;
    overflow-x: hidden;
  }

  .page {
    min-height: 100vh;
    display: grid;
    place-items: center;
    text-align: center;
  }

  .page.hidden {
    display: none;
  }

  .gumball-wrapper {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 12px;
    cursor: pointer;
    user-select: none;
    position: relative;
  }

  .gumball-wrapper img {
    max-width: 280px;
    transition: transform 0.25s ease;
    position: relative;
    z-index: 2;
  }

  .gumball-wrapper:hover img {
    transform: scale(1.05);
  }

  /* ðŸŒˆ Caption Style */
  .gumball-caption,
  .loading-caption,
  .speech-bubble {
    font-family: 'Bungee', cursive;
    font-size: 1.4rem;
    color: white;
    -webkit-text-stroke: 2px black;
    text-transform: uppercase;
    letter-spacing: 1px;
  }

  .caption-container {
    min-height: 2em;
    transition: opacity 0.6s ease;
  }

  .caption-container.fade-out {
    opacity: 0;
  }

  .speech-bubble {
    position: absolute;
    bottom: 100%;
    left: 50%;
    transform: translate(-50%, -20px);
    background: transparent;
    font-size: 1.1rem;
    padding: 8px 14px;
    border-radius: 20px;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.5s ease;
    white-space: nowrap;
    z-index: 3;
  }

  .speech-bubble.show {
    opacity: 1;
  }

  /* âœ¨ Sparkles */
  .sparkle {
    position: absolute;
    top: 0;
    width: 14px;
    height: 14px;
    background: radial-gradient(white 30%, transparent 70%);
    border-radius: 50%;
    opacity: 0;
    pointer-events: none;
    animation: sparkleFall 1.5s ease-out forwards;
  }

  @keyframes sparkleFall {
    0% {
      transform: translateY(-10px) scale(0.5);
      opacity: 1;
    }
    80% {
      opacity: 1;
      transform: translateY(250px) scale(1);
    }
    100% {
      opacity: 0;
      transform: translateY(300px) scale(0.8);
    }
  }

  /* Orange dropdown */
  .orange {
    position: fixed;
    inset: 0;
    z-index: 9999;
    pointer-events: none;
    background: linear-gradient(to bottom, #ff7a00 0%, #ff9500 100%);
    transform: translateY(-100%);
    transition: transform var(--dur) ease-in-out;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
  }

  .orange.active {
    transform: translateY(0%);
  }

  .darwin {
    max-width: 300px;
    animation: floatDarwin 2.5s ease-in-out infinite alternate;
    pointer-events: none;
  }

  @keyframes floatDarwin {
    from { transform: translateY(0); }
    to   { transform: translateY(-20px); }
  }

  .loading-caption {
    font-size: 1.5rem;
    margin-top: 10px;
  }

  .loading-caption::after {
    content: "";
    display: inline-block;
    width: 1ch;
    animation: dots 1.2s steps(4, end) infinite;
  }

  @keyframes dots {
    0% { content: ""; }
    25% { content: "."; }
    50% { content: ".."; }
    75% { content: "..."; }
    100% { content: ""; }
  }
</style>
</head>
<body>

  <!-- Page 1 -->
  <div class="page" id="page1">
    <div class="gumball-wrapper" id="goPage2">
      <img src="2.gif" alt="Gumball GIF">
      <div class="gumball-caption">Catch Gumball to get rewards</div>
    </div>
  </div>

  <!-- Page 2 -->
  <div class="page hidden" id="page2">
    <div class="gumball-wrapper" id="gumballSpeech">
      <img src="gumball.gif" alt="Gumball GIF">
      <div class="speech-bubble" id="speechBubble"></div>
      <div class="gumball-caption caption-container" id="caption2">
        Gumball wanna greet you. Click on him
      </div>
    </div>
  </div>

  <!-- Orange overlay -->
  <div class="orange" id="overlay"></div>

  <!-- ðŸŽµ Click sound -->
  <audio id="clickSound" preload="auto">
    <source src="pop.mp3" type="audio/mpeg">
  </audio>

<script>
  const page1 = document.getElementById('page1');
  const page2 = document.getElementById('page2');
  const goPage2 = document.getElementById('goPage2');
  const gumballSpeech = document.getElementById('gumballSpeech');
  const speechBubble = document.getElementById('speechBubble');
  const caption2 = document.getElementById('caption2');
  const overlay = document.getElementById('overlay');
  const clickSound = document.getElementById('clickSound');

  const gifDuration = 8000;
  const gifPath = '9.gif';

  // ðŸŸ§ Orange dropdown transition to page 2
  function showOverlayAndSwitch(targetPage) {
    overlay.classList.add('active');

    const img = document.createElement('img');
    img.src = `${gifPath}?t=${Date.now()}`;
    img.className = 'darwin';
    overlay.appendChild(img);

    const loading = document.createElement('div');
    loading.className = 'loading-caption';
    loading.textContent = 'Loading';
    overlay.appendChild(loading);

    setTimeout(() => {
      page1.classList.toggle('hidden', targetPage === 2);
      page2.classList.toggle('hidden', targetPage === 1);
      overlay.classList.remove('active');
      setTimeout(() => {
        img.remove();
        loading.remove();
      }, 500);
    }, gifDuration);
  }

  // ðŸ§  Play sound helper
  function playClickSound() {
    clickSound.currentTime = 0;
    clickSound.play();
  }

  goPage2.addEventListener('click', () => {
    playClickSound();
    showOverlayAndSwitch(2);
  });

  // âœ¨ Sparkles
  function createSparkles(container, count = 10) {
    const rect = container.getBoundingClientRect();
    for (let i = 0; i < count; i++) {
      const sparkle = document.createElement('div');
      sparkle.className = 'sparkle';
      sparkle.style.left = `${Math.random() * rect.width}px`;
      sparkle.style.top = `${Math.random() * -20}px`;
      sparkle.style.animationDelay = `${Math.random() * 0.5}s`;
      container.appendChild(sparkle);
      sparkle.addEventListener('animationend', () => sparkle.remove());
    }
  }

  // ðŸ—£ Gumball speech interaction
  let clickCount = 0;

  gumballSpeech.addEventListener('click', () => {
    playClickSound();
    createSparkles(gumballSpeech, 10);
    clickCount++;

    if (clickCount === 1) {
      speechBubble.textContent = "Gud morningg";
      speechBubble.classList.add('show');

      caption2.classList.add('fade-out');
      setTimeout(() => {
        caption2.textContent = "He's kinda shy. Give him one last click";
        caption2.classList.remove('fade-out');
      }, 600);

    } else if (clickCount === 2) {
      speechBubble.textContent = "ChÃºc CÃ¡ ngÃ y má»›i nÄƒng lÆ°á»£ng nhÃ©e âœ¨";
    }
  });
</script>
</body>
</html>
